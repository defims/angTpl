!function(){var addEvent=function(a,b,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent?b.attachEvent("on"+a,c):b[a]=c},$eval=function(a,b){var c,d,e,f,g=a.split(/({{.+?}})/gim),h=b;for(c=0;c<g.length;c++)if(e=g[c]||"",/{{(.*?)}}/gim.test(e)){for(f=RegExp.$1.split("."),d=0;d<f.length;d++)if(h=h[f[d]],!h){h="";break}g[c]=h}return g.join("")},services={$rootElement:document,$rootScope:{dom:[document],parent:"",scope:{},binds:[],children:[]},$http:function(config){var success,obj,url,dataType,type,data,xhr,response;return console.log("$http"),success=function(){},obj={success:function(a){success=a}},"undefined"==typeof window.XMLHttpRequest&&"function"==typeof window.ActiveXObject&&(window.XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(a){}return new ActiveXObject("Microsoft.XMLHTTP")}),url=config.url||"",dataType=config.dataType?config.dataType.toUpperCase():"TEXT",type=config.type?config.type.toUpperCase():"GET",data=config.data||null,xhr=new XMLHttpRequest,xhr.open(type,url,!0),data&&xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),xhr.onreadystatechange=function(){if(4==xhr.readyState&&(200==xhr.status||304==xhr.status)){switch(response=xhr.responseText,dataType.toLowerCase()){case"json":console.log("json"),"undefined"==typeof JSON?resonse=eval("("+response+")"):response=JSON.parse(response)}success(response)}},4!=xhr.readyState?(xhr.send(data),obj):void 0},$resource:function(){}},directives={"data-bind":function(a,b){var c;this.firstChild?c=this.firstChild:(c=document.createTextNode(),this.appendChild(c)),c.nodeValue=$eval(a,b.scope),b.binds.push({node:c,scope:b.scope,template:a})},"data-model":function(){},"data-attr-(.*)":function(a,b,c){var d=document.createAttribute(c);d.value=$eval(a,b.scope),b.binds.push({node:d,scope:b.scope,template:a}),this.setAttributeNode(d)},"data-evt-(.*)":function(a,b,c){for(var d,e=b;!(d=e.scope[a]);)e=e.parent;addEvent(c,this,d)}},textNode=function(a,b){var c,d,e,f,g,h,i,j,k=a.nodeValue.split(/({{.+?}})/gim);if(!(k.length<=1))for(h=a.parentNode,i=b.scope,k.length,j=!1;k.length>0;){if(d=k.shift()||"",j=/{{(.*?)}}/gim.test(d)){for(g=RegExp.$1,e=g.split("."),c=0;c<e.length;c++)if(i=i[e[c]],!i){i="";break}d=i}k.length>0?(f=a.cloneNode(!1),f.nodeValue=d,h.insertBefore(f,a)):(f=a,f.nodeValue=d),j&&b.binds.push({node:f,scope:b.scope,template:"{{"+g+"}}"})}},buildScope=function(a,b){var c,d,e,f,g,h,i,j,k;if("SCRIPT"!=a.tagName){if(1==a.nodeType){if(h=a.attributes,(f=a.getAttribute("data-controller"))&&(j={},window[f](j,services.$http),i={dom:[a],scope:j,binds:[],parent:b,children:[],events:[]},b.children.push(i),b=i),(f=a.getAttribute("data-repeat"))&&/(\w*) +in +(\w*)/gim.test(f)){if(j=b.scope[RegExp.$2],i={dom:[a],scope:{},binds:[],parent:b,children:[]},index=a.getAttribute("data-repeat-index"))i.scope[RegExp.$1]=j[Number(index)];else{for(c=j.length-1;c>0;c--)tempNode=a.cloneNode(!0),tempNode.setAttribute("data-repeat-index",c),a.parentNode.insertBefore(tempNode,a.nextSibling);a.setAttribute("data-repeat-index",0),i.scope[RegExp.$1]=j[0]}b.children.push(i),b=i}for(c=0;c<h.length;c++){d=h[c],e=d.nodeName,f=d.nodeValue;for(g in directives)new RegExp(g,"gim").test(e)&&(k=RegExp,directives[g].call(a,f,b,k.$1,k.$2,k.$3,k.$4,k.$5,k.$6,k.$7,k.$8,k.$9))}}else 3==a.nodeType&&textNode(a,b);for(i=a.firstChild;i;)buildScope(i,b),i=i.nextSibling}};!function(a,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):this[a]=b()}("domReady",function(a){function b(a){for(n=1;a=d.shift();)a()}var c,d=[],e=!1,f=document,g=f.documentElement,h=g.doScroll,i="DOMContentLoaded",j="addEventListener",k="onreadystatechange",l="readyState",m=h?/^loaded|^c/:/^loaded|c/,n=m.test(f[l]);return f[j]&&f[j](i,c=function(){f.removeEventListener(i,c,e),b()},e),h&&f.attachEvent(k,c=function(){/^c/.test(f[l])&&(f.detachEvent(k,c),b())}),a=h?function(b){self!=top?n?b():d.push(b):function(){try{g.doScroll("left")}catch(c){return setTimeout(function(){a(b)},50)}b()}()}:function(a){n?a():d.push(a)}}),domReady(function(){buildScope(services.$rootElement,services.$rootScope),console.log(services.$rootScope)})}();
